<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
  <h1>Firebase Singulars 2020</h1>
  <h2>Alumnes</h2>
  <div class="alumnes"></div>
  <h2>Llista compra</h2>
  <div class="compra"></div>

  <script>
    const database = "https://singulars-2020-default-rtdb.firebaseio.com/";

    let div = document.querySelector(".alumnes");
    let divCompra = document.querySelector(".compra");

    fetch(database + "alumnes.json")
    .then(res => res.json())
    .then(res =>{
      let alumnes = res;
  
      for (atribut in alumnes) {
        div.innerHTML += `<li>${atribut} ->edat: ${alumnes[atribut].edat} -> ubicació: ${alumnes[atribut].ubicacio} </li>`;
      }
    });

    fetch(database + 'llista-compra.json')
    .then(res => res.json())
    .then(res =>{
      let compra = res;

      for(item in compra){
        divCompra.innerHTML += `<li>${compra[item]}</li>`
      }
    })

    var obj = {nom: 'M.Rajoy', edat: 65, ubicacio: "España", professio : 'President', missatge: 'No sé quien es Mariano Rajoy'} 
    fetch(database + "alumnes.json", {
      method: 'POST',
      headers: {
        "Content-Type": "Application/json",
      },
      body: JSON.stringify(obj)
    })
    .then(res => res.json())
    .then(res => (console.log(res)))


  </script>
</body>
</html>